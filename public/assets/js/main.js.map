{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nlet showResultsContainer = document.body.querySelector('#show-results');\nlet showInputElem = document.body.querySelector('#show-input');\nlet searchShowButton = document.body.querySelector('#search-show');\nlet errorBlock = document.body.querySelector('#error');\n\nfunction toggleFavorite(event) {\n    // event.currentTarget nos dará el <li> que se ha seleccionado\n    let toggledResultItem = event.currentTarget;\n    toggledResultItem.classList.toggle('show-result-item-active');\n}\n\nfunction searchShow() {\n    // Obtenemos el valor introducido en el input del buscador de series\n    let query = showInputElem.value;\n\n    showResultsContainer.innerHTML = '';\n\n    // Realizar la petición a la API para el valor que hemos introducido\n    fetch(`https://api.tvmaze.com/search/shows?q=${query}`)\n        .then(response => response.json())\n        .then(response => {\n            // Reseteamos lista de resultados\n\n            // La consola devuelve la respuesta para ver su estructura\n            console.log(response);\n\n            // Mostrar un texto informativo si no hay resultados\n            if (response.length === 0) {\n                errorBlock.innerText = 'No se han encontrado resultados para esta búsqueda';\n            } else {\n                // Resetear el texto de error en caso contrario, para evitar confusiones si hay resultados\n                errorBlock.innerText = '';\n            }\n\n            // La estructura de los datos:\n            // 1. Es un array de objetos\n            // 2. Cada objeto tiene dos campos: 'score' y 'show' ('show' es un objeto con los campos de interés: nombre, géneros de la serie, imagen, sinopsis...).\n\n            // Iterar por cada elemento del array de resultados\n            for (const showData of response) {\n                // Nos interesa el campo 'show' de cada objeto del array\n                let show = showData.show;\n\n                // De momento nos interesan dos cosas: nombre de la serie e imagen\n                let showName = show.name;\n\n                // El campo 'image' tiene a su vez dos campos: 'medium' y 'original'. Creo que la 'original' contiene una imagen muy grande, y la 'medium' tendría una imagen de un tamaño más asequible para meter en nuestro listado.\n\n                let showImage;\n                if (show.image && show.image.medium) {\n                    showImage = show.image.medium;\n                } else {\n                    showImage = `https://via.placeholder.com/210x295/cccccc/666666/?text=TV`;\n                }\n\n                // Creamos un elemento li para cada resultado de serie\n                let showResultItem = document.createElement('li');\n                showResultItem.className = 'show-result-item';\n\n                // Cada elemento li tendrá dos hijos: título de la serie, y su imagen asociada\n\n                // Creamos elemento de imagen\n                let showImageElem = document.createElement('img');\n                showImageElem.src = showImage;\n                showResultItem.appendChild(showImageElem);\n\n                // Creamos elemento de título\n                let showTitleElem = document.createElement('h2');\n                let showTitleText = document.createTextNode(showName);\n                showTitleElem.appendChild(showTitleText);\n                showResultItem.appendChild(showTitleElem);\n\n                // Añadimos evento al elemento <li> para que se marque como destacado\n                showResultItem.addEventListener('click', toggleFavorite);\n\n                // Finalmente, añadimos elemento <li> a listado\n                showResultsContainer.appendChild(showResultItem);\n            }\n        })\n}\n\nsearchShowButton.addEventListener('click', searchShow);\n"]}