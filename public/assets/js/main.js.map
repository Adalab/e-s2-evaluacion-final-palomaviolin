{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconst FAVORITES_KEY = 'favorites';\nlet showResultsContainer = document.body.querySelector('#show-results');\nlet showInputElem = document.body.querySelector('#show-input');\nlet searchShowButton = document.body.querySelector('#search-show');\nlet errorBlock = document.body.querySelector('#error');\nlet selectOption = document.querySelector('#list');\n\nfunction getLocalStorageFavorites() {\n  let favorites = localStorage.getItem(FAVORITES_KEY) || '[]';\n  return JSON.parse(favorites);\n}\n\nfunction addFavorite(showId) {\n  let favorites = getLocalStorageFavorites();\n  favorites.push(showId);\n\n  localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n}\n\nfunction removeFavorite(showId) {\n  let favorites = getLocalStorageFavorites();\n  let indexToDelete = favorites.indexOf(showId);\n  if (indexToDelete !== -1) {\n    favorites.splice(indexToDelete, 1);\n  }\n  localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n}\n\nfunction hasFavorite(showId) {\n  let favorites = getLocalStorageFavorites();\n  if (favorites.indexOf(showId.toString()) !== -1) {\n    return true;\n  }\n  return false;\n}\n\nfunction toggleFavorite(event) {\n  let toggledResultItem = event.currentTarget;\n  toggledResultItem.classList.toggle('show-result-item-active');\n\n  let showId = toggledResultItem.dataset.showId;\n\n  if (showId) {\n    if (toggledResultItem.classList.contains('show-result-item-active')) {\n      addFavorite(showId);\n    } else {\n      removeFavorite(showId);\n    }\n  }\n}\n\nfunction searchShow() {\n  let query = showInputElem.value;\n  showResultsContainer.innerHTML = '';\n\n  fetch(`https://api.tvmaze.com/search/${selectOption.value}?q=${query}`)\n    .then(response => response.json())\n    .then(response => {\n      if (response.length === 0) {\n        errorBlock.innerText =\n          'No se han encontrado resultados para esta búsqueda';\n      } else {\n        errorBlock.innerText = '';\n      }\n\n      if (selectOption.value === 'shows') {\n        for (const showData of response) {\n          let show = showData.show;\n          let showName = show.name;\n          let showLanguage = show.language;\n          let showImage;\n          if (show.image && show.image.medium) {\n            showImage = show.image.medium;\n          } else {\n            showImage = `https://via.placeholder.com/210x295/cccccc/666666/?text=TV`;\n          }\n\n          let showResultItem = document.createElement('li');\n          showResultItem.className = 'show-result-item';\n\n          if (hasFavorite(show.id)) {\n            showResultItem.classList.add('show-result-item-active');\n          }\n\n          showResultItem.dataset.showId = show.id;\n\n          let showImageElem = document.createElement('img');\n          showImageElem.src = showImage;\n          showResultItem.appendChild(showImageElem);\n\n          let showTitleElem = document.createElement('h2');\n          let showTitleText = document.createTextNode(showName);\n          showTitleElem.appendChild(showTitleText);\n          showResultItem.appendChild(showTitleElem);\n\n          let showLanElem = document.createElement('p');\n          let showLanText = document.createTextNode(`Language: ${showLanguage}`);\n          showLanElem.appendChild(showLanText);\n          showResultItem.appendChild(showLanElem);\n\n          showResultItem.addEventListener('click', toggleFavorite);\n\n          showResultsContainer.appendChild(showResultItem);\n        }\n      } else if (selectOption.value === 'people') {\n        // Selector de serie o actores, contenido (con ayuda de la variable el inicio 'selectOption').\n        for (const showData of response) {\n          let person = showData.person;\n          let showName = person.name;\n          let showImage;\n          if (person.image && person.image.medium) {\n            showImage = person.image.medium;\n          } else {\n            showImage = `https://via.placeholder.com/210x295/cccccc/666666/?text=TV`;\n          }\n\n          let showResultItem = document.createElement('li');\n          showResultItem.className = 'show-result-item';\n\n          if (hasFavorite(person.id)) {\n            showResultItem.classList.add('show-result-item-active');\n          }\n\n          showResultItem.dataset.showId = person.id;\n\n          let showImageElem = document.createElement('img');\n          showImageElem.src = showImage;\n          showResultItem.appendChild(showImageElem);\n\n          let showTitleElem = document.createElement('h2');\n          let showTitleText = document.createTextNode(showName);\n          showTitleElem.appendChild(showTitleText);\n          showResultItem.appendChild(showTitleElem);\n\n          showResultItem.addEventListener('click', toggleFavorite);\n\n          showResultsContainer.appendChild(showResultItem);\n        }\n      }\n      incrementCounter();\n    });\n}\nsearchShowButton.addEventListener('click', searchShow);\n\n// Contador (las siguientes líneas de código + la línea 'incrementCounter();' al final de la función 'searchShow').\n\nlet counterElem = document.body.querySelector('#counter');\nlet counter = 0;\n\nfunction init() {\n  counterElem.innerText = '';\n  searchShowButton.addEventListener('click', searchShow);\n}\n\nfunction incrementCounter() {\n  counter += 1;\n  counterElem.innerText = `Number of searchs you have made: ${counter}`;\n}\n\ninit();\n\n\n// Código para audio\n\nlet myAudio = document.getElementById(\"myAudio\");\nlet isPlaying = false;\n\nfunction togglePlay() {\n  if (isPlaying) {\n    myAudio.pause();\n  } else {\n    myAudio.play();\n  }\n}\nmyAudio.onplaying = function() {\n  isPlaying = true;\n}\nmyAudio.onpause = function() {\n  isPlaying = false;\n}\n\n\nlet iconImage = document.querySelector('i');\nfunction toggleIcon(){\n  if (iconImage.classList.contains('fa-volume-mute')) {\n    iconImage.classList.toggle('fa-volume-up');\n  } else if ((iconImage.classList.contains('fa-volume-up'))){\n    iconImage.classList.toggle('fa-volume-mute');\n  }\n}\niconImage.addEventListener('click', toggleIcon);"]}